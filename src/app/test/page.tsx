// app/blog/[slug]/page.tsx

import React from "react";
import { generateHTML } from "@tiptap/html/server";
import Document from "@tiptap/extension-document";
import Paragraph from "@tiptap/extension-paragraph";
import Text from "@tiptap/extension-text";
import Bold from "@tiptap/extension-bold";
import Italic from "@tiptap/extension-italic";
import Heading from "@tiptap/extension-heading";
import BulletList from "@tiptap/extension-bullet-list";
import OrderedList from "@tiptap/extension-ordered-list";
import ListItem from "@tiptap/extension-list-item";
import HorizontalRule from "@tiptap/extension-horizontal-rule";
import Link from "@tiptap/extension-link";
import Code from "@tiptap/extension-code";
import Blockquote from "@tiptap/extension-blockquote";
import HardBreak from "@tiptap/extension-hard-break";

// Example rawContent (in a real app, you'd fetch from DB or API)
const rawContent = `'e12a5e06-f156-48a6-a8da-d2e5283c95bf', 'üåê ‡¶ì‡ßü‡ßá‡¶¨ ‡¶ì ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶®', '6025e774-7832-4182-9b2f-f80a4c390cd7', 'web-and-mobile', '{\"type\": \"doc\", \"content\": [{\"type\": \"heading\", \"attrs\": {\"level\": 2, \"textAlign\": null}, \"content\": [{\"text\": \"üåê ‡¶ì‡ßü‡ßá‡¶¨ ‡¶ì ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶®\", \"type\": \"text\", \"marks\": [{\"type\": \"bold\"}]}]}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"Write your amazing story here...üåê ‡¶ì‡ßü‡ßá‡¶¨ ‡¶ì ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶®\", \"type\": \"text\"}]}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡¶Ø‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶ø, ‡¶§‡¶æ-‡¶á ‡¶Ü‡¶∏‡¶≤‡ßá ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶∏‡ßá‡¶∞‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£‡•§\", \"type\": \"text\"}]}, {\"type\": \"orderedList\", \"attrs\": {\"type\": null, \"start\": 1}, \"content\": [{\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ / ‡¶®‡¶ó‡¶¶ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™\", \"type\": \"text\", \"marks\": [{\"type\": \"bold\"}]}]}]}, {\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶∞‡ßã‡¶ó ‡¶®‡¶ø‡¶∞‡ßç‡¶£‡ßü‡ßá‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™\", \"type\": \"text\", \"marks\": [{\"type\": \"bold\"}]}]}]}, {\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ\", \"type\": \"text\", \"marks\": [{\"type\": \"bold\"}]}]}]}, {\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"E-commerce\", \"type\": \"text\", \"marks\": [{\"type\": \"link\", \"attrs\": {\"rel\": \"noopener\", \"href\": \"https://daraz.com.bd/\", \"class\": \"\", \"target\": \"_new\"}}, {\"type\": \"bold\"}]}]}]}]}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"horizontalRule\"}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"heading\", \"attrs\": {\"level\": 3, \"textAlign\": null}, \"content\": [{\"text\": \"üîí ‡¶∏‡¶æ‡¶á‡¶¨‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ\", \"type\": \"text\"}]}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶≤‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶Æ‡ßÇ‡¶≤ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶®‡ßá‡¶ì‡ßü‡¶æ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø‡•§\", \"type\": \"text\"}]}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø‡¶¨‡¶ø‡¶¨‡¶∞‡¶£2FA‡¶¶‡ßç‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶∞ ‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£‡ßÄ‡¶ï‡¶∞‡¶£SSL‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞Token‡¶∏‡ßá‡¶∂‡¶® ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü\", \"type\": \"text\"}]}, {\"type\": \"horizontalRule\"}, {\"type\": \"heading\", \"attrs\": {\"level\": 3, \"textAlign\": null}, \"content\": [{\"text\": \"üñºÔ∏è ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶ö‡¶ø‡¶§‡ßç‡¶∞\", \"type\": \"text\"}]}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶ö‡¶ø‡¶§‡ßç‡¶∞: ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶ú‡¶ü‡¶ø‡¶≤‡¶§‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶® (‡¶∞‡ßÅ‡¶¨‡¶ø‡¶ï‡ßç‡¶∏ ‡¶ï‡¶ø‡¶â‡¶¨)\", \"type\": \"text\", \"marks\": [{\"type\": \"italic\"}]}]}, {\"type\": \"horizontalRule\"}, {\"type\": \"heading\", \"attrs\": {\"level\": 3, \"textAlign\": null}, \"content\": [{\"text\": \"üß≠ ‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡¶§‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø\", \"type\": \"text\"}]}, {\"type\": \"blockquote\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡¶§‡ßá‡¶∞ ‡¶¶‡¶ø‡¶ï‡ßá‡¶á ‡¶è‡¶ó‡ßã‡¶ö‡ßç‡¶õ‡¶ø, ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶á ‡¶π‡¶¨‡ßá ‡¶ö‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡¶∂‡¶ï‡ßç‡¶§‡¶ø‡•§\", \"type\": \"text\"}]}]}, {\"type\": \"heading\", \"attrs\": {\"level\": 3, \"textAlign\": null}, \"content\": [{\"text\": \"‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡ßé ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø:\", \"type\": \"text\"}]}, {\"type\": \"bulletList\", \"content\": [{\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"üåå ‡¶ï‡ßã‡¶Ø‡¶º‡¶æ‡¶®‡ßç‡¶ü‡¶æ‡¶Æ ‡¶ï‡¶Æ‡ßç‡¶™‡¶ø‡¶â‡¶ü‡¶ø‡¶Ç\", \"type\": \"text\"}]}]}, {\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"ü¶æ ‡¶¨‡¶æ‡¶Ø‡¶º‡ßã‡¶®‡¶ø‡¶ï ‡¶∂‡¶∞‡ßÄ‡¶∞\", \"type\": \"text\"}]}]}, {\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"üï∂Ô∏è \", \"type\": \"text\"}, {\"text\": \"‡¶Æ‡ßá‡¶ü‡¶æ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏ ‡¶ì VR\", \"type\": \"text\", \"marks\": [{\"type\": \"link\", \"attrs\": {\"rel\": \"noopener\", \"href\": \"https://en.wikipedia.org/wiki/Metaverse\", \"class\": \"\", \"target\": \"_new\"}}]}]}]}]}, {\"type\": \"horizontalRule\"}, {\"type\": \"heading\", \"attrs\": {\"level\": 3, \"textAlign\": null}, \"content\": [{\"text\": \"‚úÖ ‡¶â‡¶™‡¶∏‡¶Ç‡¶π‡¶æ‡¶∞\", \"type\": \"text\"}]}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø ‡¶π‡ßü‡¶§‡ßã ‡¶∏‡¶æ‡¶Æ‡¶®‡ßá ‡¶ñ‡ßÅ‡¶¨ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡ßü ‡¶®‡¶æ, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶™‡¶ø‡¶õ‡¶®‡ßá ‡¶§‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶® ‡¶¨‡¶ø‡¶∂‡¶æ‡¶≤‡•§ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶â‡¶ö‡¶ø‡¶§:\", \"type\": \"text\"}]}, {\"type\": \"bulletList\", \"content\": [{\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶ï‡ßá ‡¶≠‡ßü ‡¶®‡¶æ ‡¶™‡ßá‡ßü‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶∂‡ßá‡¶ñ‡¶æ\", \"type\": \"text\"}]}]}, {\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶∏‡¶Æ‡ßü‡ßã‡¶™‡¶Ø‡ßã‡¶ó‡ßÄ ‡¶¶‡¶ï‡ßç‡¶∑‡¶§‡¶æ ‡¶Ö‡¶∞‡ßç‡¶ú‡¶®\", \"type\": \"text\"}]}]}, {\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶ó‡¶†‡¶®‡¶Æ‡ßÇ‡¶≤‡¶ï ‡¶ï‡¶æ‡¶ú‡ßá ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ó\", \"type\": \"text\"}]}]}]}, {\"type\": \"horizontalRule\"}, {\"type\": \"heading\", \"attrs\": {\"level\": 3, \"textAlign\": null}, \"content\": [{\"text\": \"üìö ‡¶Ü‡¶∞‡¶ì ‡¶™‡ßú‡ßÅ‡¶®\", \"type\": \"text\"}]}, {\"type\": \"bulletList\", \"content\": [{\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"üîó \", \"type\": \"text\"}, {\"text\": \"‡¶ï‡ßÉ‡¶§‡ßç‡¶∞‡¶ø‡¶Æ ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡¶ø‡¶Æ‡¶§‡ßç‡¶§‡¶æ ‡¶ï‡¶ø?\", \"type\": \"text\", \"marks\": [{\"type\": \"link\", \"attrs\": {\"rel\": \"noopener\", \"href\": \"https://bn.wikipedia.org/wiki/%E0%A6%95%E0%A7%83%E0%A6%A4%E0%A7%8D%E0%A6%B0%E0%A6%BF%E0%A6%AE_%E0%A6%AC%E0%A7%81%E0%A6%A6%E0%A7%8D%E0%A6%A7%E0%A6%BF%E0%A6%A4%E0%A7%8D%E0%A6%A4%E0%A6%BE\", \"class\": \"\", \"target\": \"_new\"}}]}]}]}, {\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"üîê \", \"type\": \"text\"}, {\"text\": \"‡¶∏‡¶æ‡¶á‡¶¨‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶ó‡¶æ‡¶á‡¶°\", \"type\": \"text\", \"marks\": [{\"type\": \"link\", \"attrs\": {\"rel\": \"noopener\", \"href\": \"https://owasp.org/\", \"class\": \"\", \"target\": \"_new\"}}]}]}]}, {\"type\": \"listItem\", \"content\": [{\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"üßë‚Äçüíª \", \"type\": \"text\"}, {\"text\": \"‡¶ì‡¶™‡ßá‡¶®‡¶∏‡ßã‡¶∞‡ßç‡¶∏ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ\", \"type\": \"text\", \"marks\": [{\"type\": \"link\", \"attrs\": {\"rel\": \"noopener\", \"href\": \"https://github.com/\", \"class\": \"\", \"target\": \"_new\"}}]}]}]}]}, {\"type\": \"horizontalRule\"}, {\"type\": \"heading\", \"attrs\": {\"level\": 3, \"textAlign\": null}, \"content\": [{\"text\": \"‚úçÔ∏è ‡¶≤‡ßá‡¶ñ‡¶ï ‡¶™‡¶∞‡¶ø‡¶ö‡¶ø‡¶§‡¶ø\", \"type\": \"text\"}]}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"‡¶Ü‡¶¨‡¶ø‡¶∞ ‡¶π‡¶æ‡¶∏‡¶æ‡¶®\", \"type\": \"text\", \"marks\": [{\"type\": \"bold\"}]}, {\"text\": \" ‡¶è‡¶ï‡¶ú‡¶® ‡¶∏‡¶´‡¶ü‡¶ì‡ßü‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞ ‡¶ì ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶¨‡¶ø‡¶¶‡•§ ‡¶§‡¶ø‡¶®‡¶ø \", \"type\": \"text\"}, {\"text\": \"S.M.A.T\", \"type\": \"text\", \"marks\": [{\"type\": \"link\", \"attrs\": {\"rel\": \"noopener\", \"href\": \"https://smat.com/\", \"class\": \"\", \"target\": \"_new\"}}]}, {\"text\": \" ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶§‡¶æ‡•§\", \"type\": \"text\"}]}, {\"type\": \"paragraph\", \"attrs\": {\"textAlign\": null}, \"content\": [{\"text\": \"üìß ‡¶á‡¶Æ‡ßá‡¶á‡¶≤: \", \"type\": \"text\"}, {\"text\": \"abir@example.com\", \"type\": \"text\", \"marks\": [{\"type\": \"code\"}]}, {\"type\": \"hardBreak\"}, {\"text\": \"üåê ‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü: \", \"type\": \"text\"}, {\"text\": \"abirhasan.dev\", \"type\": \"text\", \"marks\": [{\"type\": \"link\", \"attrs\": {\"rel\": \"noopener\", \"href\": \"https://abirhasan.dev/\", \"class\": \"\", \"target\": \"_new\"}}]}]}]}', '2025-07-18 17:53:15', NULL    `;

// Extract JSON from rawContent
const match = rawContent.match(/'({.*})'/);
if (!match) {
  throw new Error("‚ùå No valid TipTap JSON found in rawContent");
}

const escapedJsonStr = match[1];

// Unescape JSON string
const unescapedJsonStr = escapedJsonStr.replace(/\\"/g, '"');

let tiptapJson;
try {
  tiptapJson = JSON.parse(unescapedJsonStr);
} catch (err) {
  throw new Error("‚ùå Failed to parse JSON: " + err.message);
}

interface BlogPageProps {
  params: { slug: string };
}

const BlogPage = async ({ params }: BlogPageProps) => {
  // TODO: Replace with real fetch based on slug
  // e.g. const rawContent = await getBlogPostContent(params.slug);

  // Generate HTML from TipTap JSON
  // Generate HTML from TipTap JSON

  function transformEmptyParagraphsToHardBreak(json: any): any {
    if (!json || typeof json !== "object") return json;

    if (json.type === "paragraph") {
      const isEmpty =
        !json.content ||
        json.content.every((node: any) => {
          if (node.type === "text") {
            return !node.text || node.text.trim() === "";
          }
          return false;
        });

      if (isEmpty) {
        return {
          type: "hardBreak",
        };
      }
    }

    // Recursively process children
    if (Array.isArray(json.content)) {
      return {
        ...json,
        content: json.content
          .map((child: any) => transformEmptyParagraphsToHardBreak(child))
          .filter(Boolean), // remove nulls
      };
    }

    return json;
  }

  const html = generateHTML(transformEmptyParagraphsToHardBreak(tiptapJson), [
    Document,
    Paragraph,
    Text,
    Bold,
    Italic,
    Heading,
    BulletList,
    OrderedList,
    ListItem,
    HorizontalRule,
    Link,
    Code,
    Blockquote,
    HardBreak,
  ]);

  // Replace empty paragraphs with <br>
  const processedHtml = html.replace(/<p>(\s|&nbsp;)*<\/p>/g, "<br>");

  return (
    <main className="max-w-3xl mx-auto px-4 py-10">
      <h1 className="text-4xl font-bold mb-2">üåê ‡¶ì‡ßü‡ßá‡¶¨ ‡¶ì ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶®</h1>
      <p className="text-sm text-gray-500 mb-6">üóìÔ∏è ‡ß®‡ß¶‡ß®‡ß´-‡ß¶‡ß≠-‡ßß‡ßÆ</p>

      <article
        className="prose prose-lg max-w-none dark:prose-invert prose-a:text-blue-600 prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded"
        dangerouslySetInnerHTML={{ __html: html }}
      />
    </main>
  );
};

export default BlogPage;
